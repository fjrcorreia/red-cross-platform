---
language: java

sudo: false

jdk:
    - oraclejdk8
#  - oraclejdk7
#  - openjdk6

cache:
    directories:
        - $HOME/.m2
#        - $HOME/.sonar/cache


before_script:
    - echo $HOME
    - echo $JAVA_OPTS
    - echo $MAVEN_OPTS


## Submit the code to code coverage
after_success:
    - bash <(curl -s https://codecov.io/bash)


addons:
    # https://docs.travis-ci.com/user/sonarqube/
    sonarqube:
#        token:
#            secure: odl6pq8+sN2RALadd1qS2SS8wK0RqTZ7QLh3m18CdkS83QyBMDJrUci6JY3/Qz1RZseFnJZbdV2mmu5x9LpY5+ZeaGLRorNC9d6hknl518p/LIZ1iLjVdXDLVsgepmG25x9MKkzsts5OXEHeoYlbNJhLOV
#    branches:
#      - master
#      - maintenance

# the following command line builds the project, runs the tests with coverage and then execute the SonarQube analysis
script: mvn clean org.jacoco:jacoco-maven-plugin:prepare-agent install sonar:sonar


#env:
#    global:
#        secure: uYRBaF6m8UgEk1Vs/g7rwmZVbnEoObZ1ZkWt5Zdo/IiILcIzVGiG/aUzMlk24G2X4vLN1IlDHbUyI2pvFj8lLADOh7w4LG6b2SgRvzUV15yx1Ijk8dOGhaqtEtarLYQfB6ZLu4IavQjTJ4nQNPxl1w9+zZIF
